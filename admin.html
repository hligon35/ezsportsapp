<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Admin Panel | EZ Sports Netting</title>
  <link rel="icon" href="assets/img/EZSportslogo.png" type="image/png" />
  <link rel="stylesheet" href="assets/css/styles.css?v=6" />
  <style>
    .admin-container { max-width: 1000px; margin: 2rem auto; padding: 2rem; }
    .admin-section { background: #fff; border-radius: 1.2rem; box-shadow: 0 4px 24px rgba(12,32,64,.10); padding: 2rem; margin-bottom: 2rem; }
    .product-form { display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; }
    .product-form input, .product-form textarea, .product-form select { padding: .8rem; border: 1px solid #cfe0f5; border-radius: .6rem; }
    .product-list { display: grid; gap: 1rem; }
    .product-item { display: flex; justify-content: space-between; align-items: center; padding: 1rem; background: #f7faff; border-radius: .8rem; }
    .admin-nav { display: flex; gap: 1rem; margin-bottom: 2rem; }
  .admin-nav button { padding: .8rem 1.5rem; border: none; background: #e6edf6; border-radius: .6rem; cursor: pointer; color:#0b2a4a; font-weight:700; }
  .admin-nav button.active { background: var(--primary, #0b64d4); color: #ffffff; box-shadow: 0 2px 10px rgba(11,100,212,.25); }
  /* Inventory UI removed for dropship model */
    .hidden{display:none;}
    .toolbar{display:flex; gap:1rem; align-items:center; margin-bottom:1rem; flex-wrap:wrap;}
    .filter-select{margin-left:.5rem; padding:.4rem;}
    @media (max-width: 768px) { .product-form { grid-template-columns: 1fr; } }
  </style>
</head>
<body>
  <a class="skip" href="#main">Skip to content</a>
  <header class="site-header">
    <div class="container header-bar">
      <button class="menu-toggle" aria-label="Toggle menu" aria-expanded="false" aria-controls="primary-nav">â˜°</button>
      <a class="brand" href="index.html">
  <img src="assets/img/EZSportslogo.png" alt="EZ Sports Netting logo" height="40"/>
        <span>EZ Sports Netting</span>
      </a>
      <form class="search" role="search" aria-label="Search store">
  <input type="search" name="q" placeholder="Searchâ€¦" aria-label="Search"/>
        <button type="submit" class="btn btn-primary">Search</button>
      </form>
      <nav id="primary-nav" class="quick-links nav-centered" aria-label="Primary">
        <a href="about.html">About</a>
        <a href="netting-calculator.html">Netting Calculator</a>
        <button class="cart-btn" aria-haspopup="dialog" aria-controls="mini-cart" onclick="Store.toggleCart()">
          <span class="icon">ðŸ›’</span>
          <span class="cart-count" id="cart-count">0</span>
        </button>
      </nav>
    </div>
  </header>
  <main id="main">
    <div class="admin-container">
      <h2>Admin Panel</h2>
      <div class="admin-nav">
    <button class="active" onclick="showSection('products', this)">Products</button>
  <button onclick="showSection('invoices', this)">Invoices</button>
    <button onclick="showSection('orders', this)">Orders</button>
    <button onclick="showSection('users', this)">Users</button>
    <button onclick="showSection('marketing', this)">Marketing</button>
    <button onclick="showSection('finance', this)">Finance</button>
    <button onclick="showSection('traffic', this)">Traffic</button>
  <a class="btn btn-ghost ml-auto" href="analytics.html">Analytics â†’</a>
      </div>

      <!-- Products Section -->
  <div id="products-section" class="admin-section">
        <h3>Product Management</h3>
        <form id="product-form" class="product-form">
          <input type="text" id="product-name" placeholder="Product Name" required />
          <input type="number" id="product-price" placeholder="Price" step="0.01" required />
          <input type="text" id="product-image" placeholder="Image URL" />
          <select id="product-category" required aria-label="Product Category">
            <option value="">Select Category</option>
            <option value="bats">Bats</option>
            <option value="gloves">Gloves</option>
            <option value="netting">Netting</option>
            <option value="helmets">Helmets</option>
          </select>
          <textarea id="product-description" placeholder="Product Description" rows="3"></textarea>
          <input type="number" id="product-stock" placeholder="Stock Quantity" min="0" />
          <button type="submit" class="btn btn-primary">Add Product</button>
          <button type="button" id="cancel-edit" class="btn btn-ghost hidden" onclick="cancelEdit()">Cancel</button>
        </form>
        <div id="products-list" class="product-list"></div>
      </div>

      <!-- Invoices Section -->
  <div id="invoices-section" class="admin-section hidden">
        <h3>Invoices</h3>
        <div class="toolbar">
          <label>
            <span>Status:</span>
            <select id="invoices-status-filter" class="filter-select">
              <option value="">All</option>
              <option value="paid">Paid</option>
              <option value="unpaid">Unpaid</option>
            </select>
          </label>
          <button class="btn btn-secondary" id="invoices-refresh-btn">Refresh</button>
        </div>
        <div id="invoices-list"></div>
      </div>

      <!-- Orders Section -->
  <div id="orders-section" class="admin-section hidden">
        <h3>Order Management</h3>
        <div class="toolbar">
          <label>
            <span>Status:</span>
            <select id="orders-status-filter" class="filter-select">
              <option value="">All</option>
              <option value="pending">Pending</option>
              <option value="paid">Paid</option>
              <option value="fulfilled">Fulfilled</option>
              <option value="cancelled">Cancelled</option>
            </select>
          </label>
          <button class="btn btn-secondary" id="orders-refresh-btn">Refresh</button>
        </div>
        <div id="orders-list"></div>
      </div>

      <!-- Users Section -->
  <div id="users-section" class="admin-section hidden">
        <h3>User Management</h3>
        <form id="billing-portal-form" class="toolbar" onsubmit="event.preventDefault(); window.openBillingPortal(document.getElementById('billing-email').value)">
          <label>
            <span>Billing email:</span>
            <input id="billing-email" type="email" placeholder="customer@email.com" class="filter-select" required />
          </label>
          <button type="submit" class="btn btn-secondary">Open Billing Portal</button>
        </form>
        <div id="users-list"></div>
      </div>

      <!-- Marketing Section -->
      <div id="marketing-section" class="admin-section hidden">
        <h3>Marketing</h3>
        <div class="stack-05">
          <section style="display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:1rem;">
            <div class="card" style="background:#f7faff;border:1px solid #e6edf6;border-radius:.8rem;padding:1rem;">
              <div class="muted" style="font-size:.8rem;">Active subscribers</div>
              <div id="w-subs-active" style="font-size:1.6rem;font-weight:800;">â€“</div>
            </div>
            <div class="card" style="background:#f7faff;border:1px solid #e6edf6;border-radius:.8rem;padding:1rem;">
              <div class="muted" style="font-size:.8rem;">Coupons (total)</div>
              <div id="w-coupons-total" style="font-size:1.6rem;font-weight:800;">â€“</div>
            </div>
            <div class="card" style="background:#f7faff;border:1px solid #e6edf6;border-radius:.8rem;padding:1rem;">
              <div class="muted" style="font-size:.8rem;">Active coupons</div>
              <div id="w-coupons-active" style="font-size:1.6rem;font-weight:800;">â€“</div>
            </div>
            <div class="card" style="background:#f7faff;border:1px solid #e6edf6;border-radius:.8rem;padding:1rem;">
              <div class="muted" style="font-size:.8rem;">Total redemptions</div>
              <div id="w-coupons-used" style="font-size:1.6rem;font-weight:800;">â€“</div>
            </div>
          </section>
          <section>
            <h4>Top codes</h4>
            <ul id="w-top-codes" class="muted" style="margin:0;"></ul>
          </section>
          <section>
            <h4>Send Newsletter</h4>
            <form id="newsletter-form" class="product-form" style="grid-template-columns:1fr;">
              <input type="text" id="nl-subject" placeholder="Subject" required />
              <textarea id="nl-text" placeholder="Plain text content (optional)" rows="3"></textarea>
              <textarea id="nl-html" placeholder="HTML content" rows="6"></textarea>
              <div>
                <button type="submit" class="btn btn-primary">Queue Newsletter</button>
                <span id="nl-status" class="muted" style="margin-left:.5rem;"></span>
              </div>
            </form>
          </section>
          <hr/>
          <section>
            <h4>Create Coupon</h4>
            <form id="coupon-form" class="product-form">
              <input type="text" id="cp-code" placeholder="Code (e.g., SAVE10)" required />
              <select id="cp-type" required aria-label="Coupon Type">
                <option value="percent">Percent %</option>
                <option value="fixed">Fixed $</option>
              </select>
              <input type="number" id="cp-value" placeholder="Value (e.g., 10)" step="0.01" required />
              <input type="date" id="cp-expires" placeholder="Expires (optional)" />
              <input type="number" id="cp-maxuses" placeholder="Max uses (0 = unlimited)" min="0" />
              <input type="text" id="cp-emails" placeholder="Restrict to emails (comma-separated, optional)" />
              <button type="submit" class="btn btn-primary">Create Coupon</button>
            </form>
            <div id="coupon-status" class="muted" style="margin-top:.5rem;"></div>
          </section>
          <section>
            <div class="flex-row space-between items-center"><h4>Coupons</h4><button id="coupons-refresh" class="btn btn-ghost" type="button">Refresh</button></div>
            <div id="coupons-list" class="product-list"><p class="muted">Loading couponsâ€¦</p></div>
            <div id="coupons-error" class="muted" style="display:none;color:#b00;"></div>
          </section>
          <section>
            <div class="flex-row space-between items-center"><h4>Subscribers</h4><button id="subs-refresh" class="btn btn-ghost" type="button">Refresh</button></div>
            <div id="subs-list" class="product-list"><p class="muted">Loading subscribersâ€¦</p></div>
            <div id="subs-error" class="muted" style="display:none;color:#b00;"></div>
          </section>
        </div>
      </div>

      <!-- Finance Section (Stripe) -->
      <div id="finance-section" class="admin-section hidden">
        <h3>Finance</h3>
        <div class="toolbar">
          <label>
            <span>Timeframe:</span>
            <select id="finance-timeframe" class="filter-select">
              <option value="today">Today</option>
              <option value="week" selected>Last 7 days</option>
              <option value="month">This month</option>
              <option value="all">All time</option>
            </select>
          </label>
          <button class="btn btn-secondary" id="finance-refresh-btn">Refresh</button>
        </div>
        <section class="cards mt-4" id="finance-kpis" style="display:grid;grid-template-columns:repeat(auto-fit,minmax(160px,1fr));gap:1rem;">
          <div class="card-sm"><div class="muted">Gross</div><div class="kpi" id="fin-gross">$0.00</div></div>
          <div class="card-sm"><div class="muted">Refunds</div><div class="kpi" id="fin-refunds">$0.00</div></div>
          <div class="card-sm"><div class="muted">Fees</div><div class="kpi" id="fin-fees">$0.00</div></div>
          <div class="card-sm"><div class="muted">Net</div><div class="kpi" id="fin-net">$0.00</div></div>
        </section>
        <section class="mt-4">
          <h4>Balance</h4>
          <div id="fin-balance" class="muted">â€“</div>
        </section>
        <section class="mt-4">
          <h4>Cash Flow (Daily)</h4>
          <canvas id="fin-chart" height="120"></canvas>
        </section>
        <section class="mt-4">
          <div class="flex-row space-between items-center"><h4>Recent Payouts</h4></div>
          <div id="fin-payouts" class="product-list"><p class="muted">No payouts.</p></div>
        </section>
        <section class="mt-4">
          <div class="flex-row space-between items-center"><h4>Payout History (Local)</h4><button id="fin-payouts-local-refresh" class="btn btn-ghost" type="button">Refresh</button></div>
          <div id="fin-payouts-local" class="product-list"><p class="muted">Loadingâ€¦</p></div>
        </section>
        <section class="mt-4">
          <div class="flex-row space-between items-center"><h4>Stripe Invoices</h4></div>
          <div id="fin-invoices" class="product-list"><p class="muted">Loadingâ€¦</p></div>
        </section>
      </div>

      <!-- Traffic Section (Cloudflare) -->
      <div id="traffic-section" class="admin-section hidden">
        <h3>Traffic</h3>
        <div class="toolbar">
          <label>
            <span>Timeframe:</span>
            <select id="traffic-timeframe" class="filter-select">
              <option value="today">Today</option>
              <option value="week" selected>Last 7 days</option>
              <option value="month">This month</option>
              <option value="all">All time</option>
            </select>
          </label>
          <button class="btn btn-secondary" id="traffic-refresh-btn">Refresh</button>
        </div>
        <section class="cards mt-4" id="traffic-kpis" style="display:grid;grid-template-columns:repeat(auto-fit,minmax(160px,1fr));gap:1rem;">
          <div class="card-sm"><div class="muted">Requests</div><div class="kpi" id="cf-reqs">0</div></div>
          <div class="card-sm"><div class="muted">Cache Hit %</div><div class="kpi" id="cf-cache">0%</div></div>
          <div class="card-sm"><div class="muted">Bandwidth</div><div class="kpi" id="cf-band">0 MB</div></div>
          <div class="card-sm"><div class="muted">Threats</div><div class="kpi" id="cf-threats">0</div></div>
        </section>
        <section class="mt-4">
          <h4>Top Paths</h4>
          <ul id="cf-top-paths" class="product-list"></ul>
        </section>
        <section class="mt-4">
          <h4>Requests (Daily)</h4>
          <canvas id="cf-chart" height="120"></canvas>
        </section>
        <section class="mt-4">
          <h4>By Country</h4>
          <ul id="cf-by-country" class="product-list"></ul>
        </section>
      </div>
    </div>
  </main>
  <footer class="site-footer">
    <div class="container footer-grid">
      <div class="footer-brand-block">
        <a class="brand brand--light" href="index.html">
          <img src="assets/img/EZSportslogo.png" alt="EZ Sports Netting logo" height="36"/>
          <span>EZ Sports Netting</span>
        </a>
        <p class="muted">Better baseball through better gear.</p>
        <div class="socials" aria-label="social links">
          <a href="https://www.facebook.com/Ezsportsnetting/" aria-label="Facebook" target="_blank" rel="noopener">
            <img src="assets/img/facebook.png" alt="Facebook" />
          </a>
          <a href="#" aria-label="Instagram"><img src="assets/img/instagram.png" alt="Instagram" /></a>
          <a href="#" aria-label="X"><img src="assets/img/xwhite.png" alt="X" /></a>
        </div>
      </div>
      <nav aria-label="Footer">
        <h4>Shop</h4>
        <ul>
          <li><a href="index.html#catalog" onclick="Store.filter('bats')">Bats</a></li>
          <li><a href="index.html#catalog" onclick="Store.filter('gloves')">Gloves</a></li>
          <li><a href="index.html#catalog" onclick="Store.filter('netting')">Netting</a></li>
          <li><a href="index.html#catalog" onclick="Store.filter('helmets')">Helmets</a></li>
        </ul>
      </nav>
      <nav>
        <h4>Company</h4>
        <ul>
          <li><a href="about.html">About</a></li>
          <li><a href="careers.html">Careers</a></li>
          <li><a href="contactus.html">Contact Us</a></li>
        </ul>
      </nav>
      <form class="subscribe" onsubmit="event.preventDefault(); alert('Thanks for subscribing!')">
        <h4>Get deals in your inbox</h4>
        <div class="row">
          <input type="email" placeholder="you@email.com" required />
          <button class="btn btn-primary" type="submit">Subscribe</button>
        </div>
      </form>
    </div>
    <div class="subfooter container">
      <p>Â© <span id="year"></span> EZ Sports Netting. All rights reserved.</p>
    </div>
  </footer>

  <dialog id="mini-cart" class="mini-cart" aria-labelledby="cart-title">
    <form method="dialog" class="mini-cart__backdrop" onclick="this.closest('dialog').close()"></form>
    <section class="mini-cart__panel" role="document">
      <header>
        <h3 id="cart-title">Your cart</h3>
        <button class="icon-btn" onclick="document.getElementById('mini-cart').close()" aria-label="Close">âœ•</button>
      </header>
      <div id="cart-items" class="mini-cart__items"></div>
      <footer class="mini-cart__footer">
        <div class="totals">
          <span>Subtotal</span>
          <strong id="cart-subtotal">$0.00</strong>
        </div>
          <div class="totals"><span>Shipping</span><strong id="cart-shipping">$0.00</strong></div>
          <div class="totals"><span>Total</span><strong id="cart-total">$0.00</strong></div>
        <div class="stack-05">
          <button type="button" class="btn btn-primary btn-block" onclick="Store.checkout()">Secure Checkout</button>
          <a class="btn btn-ghost btn-block" href="index.html">Continue Shopping</a>
        </div>
      </footer>
    </section>
  </dialog>

  <!-- Inventory-related modals removed for dropship model -->

  <script type="module" src="assets/js/analytics.js"></script>
  <!-- Optional chart library for admin dashboards -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.4/dist/chart.umd.min.js" integrity="sha384-6VYa3u7J4YON5D3hV8mH7KGLzsdSsJcX+8YbqG+zI5wV1Gq4r7S1rGkVZq6x9GxP" crossorigin="anonymous"></script>
  <script type="module" src="assets/js/admin.js"></script>
  <script type="module" src="assets/js/app.js"></script>
</body>
</html>
